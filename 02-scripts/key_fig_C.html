<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Key Figure C</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="key_fig_C_files/libs/clipboard/clipboard.min.js"></script>
<script src="key_fig_C_files/libs/quarto-html/quarto.js"></script>
<script src="key_fig_C_files/libs/quarto-html/popper.min.js"></script>
<script src="key_fig_C_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="key_fig_C_files/libs/quarto-html/anchor.min.js"></script>
<link href="key_fig_C_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="key_fig_C_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="key_fig_C_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="key_fig_C_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="key_fig_C_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="key_fig_C_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="key_fig_C_files/libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="key_fig_C_files/libs/typedarray-0.1/typedarray.min.js"></script>
<script src="key_fig_C_files/libs/jquery-3.5.1/jquery.min.js"></script>
<link href="key_fig_C_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="key_fig_C_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="key_fig_C_files/libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="key_fig_C_files/libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Key Figure C</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we acknowledge that this figure is based on:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://stackoverflow.com/questions/65918325/how-to-plot-surface-fit-through-3d-data-in-r</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># also, of potential interest:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># https://stackoverflow.com/questions/50573936/r-how-to-change-color-of-plotly-3d-surface</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmlwidgets)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># fit a gam model</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">gam</span>(qsec <span class="sc">~</span> <span class="fu">te</span>(hp) <span class="sc">+</span> <span class="fu">te</span>(wt) <span class="sc">+</span> <span class="fu">ti</span>(hp, wt), <span class="at">data =</span> mtcars)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># make some predictions for the model at different combinations of hp and wt</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>hp_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(mtcars<span class="sc">$</span>hp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(mtcars<span class="sc">$</span>hp, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">length =</span> <span class="dv">25</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>wt_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(mtcars<span class="sc">$</span>wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(mtcars<span class="sc">$</span>wt, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">length =</span> <span class="dv">25</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># make a function that will generate predictions</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>predfun <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y){</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  newdat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">hp =</span> x, <span class="at">wt =</span> y)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(mod, <span class="at">newdata =</span> newdat)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># we apply that prediction function to the sequences of data we made above</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">outer</span>(hp_seq, wt_seq, <span class="fu">Vectorize</span>(predfun))</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># set axes title</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># https://plotly.com/r/3d-axes/</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>axx <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Composition"</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>axy <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Distribution"</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>axz <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Structure"</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co"># ticks formatting</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>axx <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Composition – Lack of adaptive capacity"</span>,</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">ticketmode =</span> <span class="st">'array'</span>,</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">ticktext =</span> <span class="fu">c</span>(<span class="st">"High"</span>, <span class="st">"Low"</span>),</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">tickvals =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">300</span>)</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>axy <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Distribution – Exposure"</span>,</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">ticktext =</span> <span class="fu">c</span>(<span class="st">"Low"</span>, <span class="st">"High"</span>),</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">tickvals =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>axz <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Structure – Sensitivity"</span>,</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">ticktext =</span> <span class="fu">c</span>(<span class="st">"Low"</span>, <span class="st">"High"</span>),</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">tickvals =</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">24</span>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="co"># put everything together</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="co"># https://hauselin.github.io/colorpalettejs/</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_surface</span>(</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="sc">~</span>hp_seq, <span class="at">y =</span> <span class="sc">~</span>wt_seq, <span class="at">z =</span> <span class="fu">t</span>(fit), <span class="at">showscale =</span> <span class="cn">FALSE</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># colorscale = list(c(0, 1), c("#440154", "#fde725"))</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">scene =</span> <span class="fu">list</span>(<span class="at">xaxis =</span> axx, <span class="at">yaxis =</span> axy,<span class="at">zaxis =</span> axz))</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-bd0c825a3c36245296cc" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-bd0c825a3c36245296cc">{"x":{"visdat":{"712c6aa9316a":["function () ","plotlyVisDat"]},"cur_data":"712c6aa9316a","attrs":{"712c6aa9316a":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":[[18.4289975838685,18.6853785769216,18.7668165681203,18.4983685556101,17.719033425709,16.6197483580355,15.672629890646,14.9584365939284,14.4406160543211,14.0826059170172,13.8478438272098,13.6997674300919,13.6018143708566,13.5184694409457,13.433078607108,13.3453357901045,13.2554761882516,13.163734999866,13.0703474232642,12.975548656763,12.8795738986787,12.7826583473282,12.6850372010278,12.5869456580942,12.4886189168441],[18.5241439196594,18.7792610958484,18.8599292679549,18.5916994318963,17.8140389972212,16.7177106070764,15.7740637838867,15.063443749998,14.5489954208487,14.1938537800113,13.9611538110582,13.8140304975619,13.7156188230946,13.6301140842824,13.5408099132609,13.447553455164,13.3507399386993,13.2507645925742,13.1480226454964,13.0429093261733,12.9358198633126,12.8271494856217,12.7172934218082,12.6066469005796,12.4956051506435],[18.628404684948,18.8828802933274,18.9632941818363,18.6955846306041,17.9195868614903,16.8259397962688,15.8854070052564,15.1779751152027,14.6665027163891,14.3138384733552,14.0828310506407,13.9363291127852,13.8371813243281,13.7493091729337,13.6559578128957,13.5571212176178,13.4533479106237,13.3451864154376,13.2331852555834,13.1178929545852,12.999858035967,12.8796290232527,12.7577544399664,12.6347828096321,12.5112626557738],[18.750894309232,19.0059728479107,19.0871635238112,18.8205784741551,18.0462193112731,16.9547028657643,16.0165688828839,15.3115548986777,14.8022658699552,14.4512968273988,14.2212428016913,14.0746988235151,13.9742599235528,13.8836051522139,13.7859388994945,13.68138917486,13.5706443255018,13.4543926986114,13.3333226413804,13.2081225010002,13.0794806246625,12.9480853595587,12.8146250528803,12.6797880518189,12.544262703566],[18.9007272220092,19.1582754381504,19.2417895079262,18.977235284971,18.2044786393263,17.1142667557145,16.1774587448982,15.4737073095583,14.9654128105598,14.614965672492,14.3847563199439,14.2371751775049,14.1346126697642,14.0405524674375,13.9381697665391,13.8277074242848,13.7099734048101,13.5857756722507,13.455922190742,13.3212209244198,13.1824798374196,13.0405068938771,12.8961100579277,12.7500972937071,12.603276565351],[19.0870178527772,19.3495247425987,19.4374243482281,19.1761093854735,18.4049071384069,17.3148984062711,16.3779859194283,15.6739565569796,15.1650714672159,14.8135818389845,14.5817388611327,14.4317937225081,14.3259976119579,14.2277015639191,14.1200670075116,14.0034260632865,13.8786793700256,13.7467275665107,13.6084712915234,13.4648111838456,13.316647882259,13.1648820255453,13.0104142524864,12.8541452018639,12.6969755124597],[19.3188663727599,19.5894412818454,19.6843025338402,19.4277364716538,18.6580285498193,17.5668470209304,16.6280428618307,15.921810732869,15.4103543024157,15.0558672399706,14.8205432150331,14.6665758971027,14.5561589556791,14.4525892217572,14.3390336470373,14.2158816422767,14.0840928504797,13.9446269146502,13.7984434777922,13.6465021829099,13.4897626730073,13.3291845910885,13.1657275801575,13.0003512832184,12.8340153432753],[19.5998181047908,19.8814506328408,19.9857531414249,19.7353956110772,18.967139196971,17.8734518202403,16.9309486025826,16.2204988629406,15.7043482122607,15.3447322090002,15.1038864116167,14.9440463785674,14.8274476683098,14.7174284208033,14.5971864498844,14.4671329736417,14.3282491426077,14.1815161073146,14.0279150182949,13.8684270260809,13.704033281205,13.5357149341996,13.3644531355971,13.1912290359299,13.0170237857302],[19.9194617672735,20.2131622724166,20.3277553393538,20.0841335298795,19.3173764535454,18.2206906330673,17.2735063855291,16.5574737649612,16.0350008053905,15.6684854359575,15.4203255858025,15.252919184066,15.1286641598885,15.0110560469283,14.8833604073945,14.745978507517,14.5998789733302,14.4460304308685,14.2854015061662,14.1189608252578,13.9476770141775,13.7725186989597,13.5944545056388,13.4144530602493,13.2334829888253],[20.2652289466142,20.5697411418573,20.6936066951466,20.4561789645281,19.6910710469753,18.5918579125541,17.63996677546,16.9177498868822,16.3879197630245,16.0131787815006,15.7562293199246,15.5797737559101,15.4465144670711,15.3202415776683,15.1843376807535,15.0391671731926,14.8856567160502,14.724732970391,14.5573225972795,14.3843522577803,14.2067486129581,14.0254383238775,13.8413480516031,13.6554044571994,13.4685342017312],[20.6245512292189,20.9363521824477,21.0666047763228,20.8337606514907,20.0705537046938,18.9702481118431,18.014580337165,17.286341676655,16.7487127663817,16.364864106288,16.0979661963169,15.9111895364112,15.7677046265138,15.6317544905594,15.4869004311474,15.3334478999586,15.1722567441706,15.0041868109611,14.8300979475078,14.6508500009884,14.4673028185805,14.2803162474619,14.0907501348103,13.8994643278033,13.7073186736186],[20.9852997513945,21.2988414252677,21.4309190835293,21.2000687105673,20.439057677521,19.3398995281061,18.3822084025141,17.6487894420753,17.1034683134858,16.7100606008039,16.4323818880879,16.2342477593962,16.079473798787,15.9329272926385,15.7784187664882,15.6161778288615,15.4469777209062,15.2715916837697,15.0907929585998,14.905354786544,14.7160504087501,14.5236530663656,14.3289360005383,14.1326724524156,13.9356356631453],[21.3397430145538,21.6498686909059,21.7794421504602,21.5479111764188,20.7888452817947,19.6922920567835,18.7338225671777,17.9958943219124,17.4430851117049,17.0399627378313,16.7510950015678,16.5410497041905,16.3743946469753,16.216725176284,16.0521447580649,15.8807988006648,15.7033638580019,15.5205164839942,15.3329332325598,15.1412906576169,14.9462653130835,14.7485337528777,14.5487725309176,14.3476582011213,14.1458673174069],[21.6826812295019,21.9860167252649,22.1100886511499,21.8756334372792,21.1173771672678,20.0231899690207,19.063912308985,18.321486290354,17.7612312659617,17.3484567057193,17.0484720795383,16.82658685733,16.6481105090059,16.4793562582248,16.3047169191756,16.1242558201965,15.9385551372806,15.7481970464209,15.5537637236103,15.3558373448417,15.1550000861083,14.9518341234029,14.7469216327186,14.5408447900483,14.3341857713851],[22.0090178132215,22.3039701343521,22.4208752931294,22.1816861272,21.4222268483555,20.3284799598543,19.3670956202506,18.6195258634451,18.0517042286242,17.6295544656296,17.3190003243029,17.0859655544855,16.896373906019,16.7171331312099,16.5328748132197,16.3435926940905,16.149789153936,15.9519665728703,15.7506273310071,15.5462738084606,15.3394083853444,15.1305334417726,14.9201513578591,14.7087645137177,14.4968752894624],[22.3165676189994,22.6026037495688,22.7114886227233,22.4660709810478,21.7029861605182,20.6068876484835,19.6414406103161,18.8877393309024,18.3121439340305,17.8810048206103,17.5606723915514,17.3174970477637,17.1178291901569,16.9289894038223,16.7357732100889,16.5381225593564,16.3364808973247,16.1312916696938,15.9229983221635,15.7120443004337,15.4988730502044,15.2839280171754,15.0676526470467,14.8504903855181,14.6328846782897],[22.6069746879004,22.8836730369701,22.9838113965231,22.7308297770427,21.9619014813285,20.8608724722545,19.8895530615385,19.1288058143152,18.5452440369028,18.1054713538331,17.7760913896377,17.5237077688483,17.3149241159966,17.1173059047625,16.9157434146269,16.710143228344,16.5009091155284,16.288444845795,16.0731541887585,15.8554409140336,15.635708791235,15.4143615899775,15.1918030798758,14.9684370305447,14.7446672115988],[22.8821437684666,23.1491295885356,23.2398758985062,22.9781431882797,22.2013999209367,21.0931480828183,20.1143477004558,19.3457416452439,18.754042270856,18.3059522677157,17.9681743262465,17.707411136872,17.4903653900157,17.2846981642163,17.0753330037593,16.8621557228618,16.6455475335676,16.4258896479209,16.2035632779658,15.9789496357463,15.7524299333064,15.5243853826903,15.295197195942,15.0652465851055,14.834914762225],[23.1439796092397,23.4009249962447,23.4817144126494,23.2101918878534,22.4239085894931,21.3064281318256,20.3187392536062,19.5415631552491,18.941576369505,18.4854457646755,18.1398382090624,17.8714205709672,17.6468597186917,17.4337817123694,17.217089554412,16.9966610647186,16.7728698764629,16.5460896228184,16.3166939369588,16.0850564520575,15.8515508012883,15.6165506178248,15.3804295348404,15.1435611855089,14.9063192030037],[23.3943869587616,23.6410108520769,23.71135922293,23.4291565488586,22.631854597148,21.5034262709276,20.5056424475278,19.7192866758912,19.1108840664646,18.6469500471302,18.2940000457701,18.0185494902668,17.7871138085023,17.5671720794078,17.3435606435105,17.1161602757232,16.8853498692348,16.6515083172343,16.4150145129109,16.1762473494533,15.9355857200508,15.6934085178922,15.4500946361666,15.206022968063,14.9615724067704],[23.6352705655742,23.8713387480116,23.930842613325,23.6372178443901,22.8276650540516,21.6868561517749,20.6779720087587,19.8819285387308,19.2650030953498,18.7934633174971,18.4335768440544,18.1516113139032,17.913834365925,17.6874847955172,17.4572938479806,17.2231543776842,16.9854612369039,16.7446092779157,16.5009933529956,16.2550083144196,16.0070490144636,15.7575103054037,15.5067870395159,15.255274069076,15.0033662463602],[23.8685351782193,24.0938602760284,24.1421968678115,23.8365564475425,23.0137670703541,21.8594314260187,20.8386426638371,20.0325050753284,19.4069711897754,18.927983778194,18.5614856115999,18.2734194610091,18.0297280974374,17.7973353908834,17.560836744748,17.3201443924104,17.0756777044908,16.8278560516094,16.5770988043864,16.3238253334422,16.0684550093968,15.8114072028705,15.5531012844836,15.2939566248562,15.0343925946086],[24.0960855452388,24.3105270281068,24.3474542703667,24.0293530314107,23.1925877562059,22.0238657453097,20.9905691393012,20.1740326172445,19.5398260833564,19.0535096316382,18.6806433560913,18.3867873507172,18.137501709517,17.8993393956922,17.6567369107383,17.4096313417104,17.1584729970159,16.9037121850623,16.6457992142568,16.385184393007,16.1223180297202,15.8576504328038,15.5916319106652,15.3247127717118,15.057343324351],[24.3198264151746,24.5232905962261,24.5486471049677,24.2177882690894,23.3665542217571,22.1828727612989,21.1366661616889,20.3095274960395,19.6666055097075,19.1730390802474,18.7939670852134,18.49452840216,18.2398619086415,17.9961123401294,17.7475419228772,17.494116247393,17.2363208395,16.9746412250213,16.7095629297803,16.4415714796001,16.1711524003038,15.8987912177147,15.624973457656,15.3501846459509,15.0749103084227],[24.5416625365685,24.734102572366,24.7478076555916,24.4040428336733,23.5380935771582,22.3391661256372,21.2798484575386,20.4420060432741,19.7903472024438,19.289570326439,18.9043738066507,18.5994560344701,18.3395154012884,18.0902697543807,17.8357993580904,17.5761001312669,17.3116949569635,17.0431067182335,16.7708582981303,16.4954725797072,16.2174724460174,15.9373807801145,15.6557204650515,15.3730143838819,15.089785419659]],"type":"surface","x":{},"y":{},"showscale":false,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Composition – Lack of adaptive capacity","ticketmode":"array","ticktext":["High","Low"],"tickvals":[50,300]},"yaxis":{"title":"Distribution – Exposure","ticktext":["Low","High"],"tickvals":[2,5]},"zaxis":{"title":"Structure – Sensitivity","ticktext":["Low","High"],"tickvals":[14,24]}},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"","ticklen":2},"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666666","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"z":[[18.4289975838685,18.6853785769216,18.7668165681203,18.4983685556101,17.719033425709,16.6197483580355,15.672629890646,14.9584365939284,14.4406160543211,14.0826059170172,13.8478438272098,13.6997674300919,13.6018143708566,13.5184694409457,13.433078607108,13.3453357901045,13.2554761882516,13.163734999866,13.0703474232642,12.975548656763,12.8795738986787,12.7826583473282,12.6850372010278,12.5869456580942,12.4886189168441],[18.5241439196594,18.7792610958484,18.8599292679549,18.5916994318963,17.8140389972212,16.7177106070764,15.7740637838867,15.063443749998,14.5489954208487,14.1938537800113,13.9611538110582,13.8140304975619,13.7156188230946,13.6301140842824,13.5408099132609,13.447553455164,13.3507399386993,13.2507645925742,13.1480226454964,13.0429093261733,12.9358198633126,12.8271494856217,12.7172934218082,12.6066469005796,12.4956051506435],[18.628404684948,18.8828802933274,18.9632941818363,18.6955846306041,17.9195868614903,16.8259397962688,15.8854070052564,15.1779751152027,14.6665027163891,14.3138384733552,14.0828310506407,13.9363291127852,13.8371813243281,13.7493091729337,13.6559578128957,13.5571212176178,13.4533479106237,13.3451864154376,13.2331852555834,13.1178929545852,12.999858035967,12.8796290232527,12.7577544399664,12.6347828096321,12.5112626557738],[18.750894309232,19.0059728479107,19.0871635238112,18.8205784741551,18.0462193112731,16.9547028657643,16.0165688828839,15.3115548986777,14.8022658699552,14.4512968273988,14.2212428016913,14.0746988235151,13.9742599235528,13.8836051522139,13.7859388994945,13.68138917486,13.5706443255018,13.4543926986114,13.3333226413804,13.2081225010002,13.0794806246625,12.9480853595587,12.8146250528803,12.6797880518189,12.544262703566],[18.9007272220092,19.1582754381504,19.2417895079262,18.977235284971,18.2044786393263,17.1142667557145,16.1774587448982,15.4737073095583,14.9654128105598,14.614965672492,14.3847563199439,14.2371751775049,14.1346126697642,14.0405524674375,13.9381697665391,13.8277074242848,13.7099734048101,13.5857756722507,13.455922190742,13.3212209244198,13.1824798374196,13.0405068938771,12.8961100579277,12.7500972937071,12.603276565351],[19.0870178527772,19.3495247425987,19.4374243482281,19.1761093854735,18.4049071384069,17.3148984062711,16.3779859194283,15.6739565569796,15.1650714672159,14.8135818389845,14.5817388611327,14.4317937225081,14.3259976119579,14.2277015639191,14.1200670075116,14.0034260632865,13.8786793700256,13.7467275665107,13.6084712915234,13.4648111838456,13.316647882259,13.1648820255453,13.0104142524864,12.8541452018639,12.6969755124597],[19.3188663727599,19.5894412818454,19.6843025338402,19.4277364716538,18.6580285498193,17.5668470209304,16.6280428618307,15.921810732869,15.4103543024157,15.0558672399706,14.8205432150331,14.6665758971027,14.5561589556791,14.4525892217572,14.3390336470373,14.2158816422767,14.0840928504797,13.9446269146502,13.7984434777922,13.6465021829099,13.4897626730073,13.3291845910885,13.1657275801575,13.0003512832184,12.8340153432753],[19.5998181047908,19.8814506328408,19.9857531414249,19.7353956110772,18.967139196971,17.8734518202403,16.9309486025826,16.2204988629406,15.7043482122607,15.3447322090002,15.1038864116167,14.9440463785674,14.8274476683098,14.7174284208033,14.5971864498844,14.4671329736417,14.3282491426077,14.1815161073146,14.0279150182949,13.8684270260809,13.704033281205,13.5357149341996,13.3644531355971,13.1912290359299,13.0170237857302],[19.9194617672735,20.2131622724166,20.3277553393538,20.0841335298795,19.3173764535454,18.2206906330673,17.2735063855291,16.5574737649612,16.0350008053905,15.6684854359575,15.4203255858025,15.252919184066,15.1286641598885,15.0110560469283,14.8833604073945,14.745978507517,14.5998789733302,14.4460304308685,14.2854015061662,14.1189608252578,13.9476770141775,13.7725186989597,13.5944545056388,13.4144530602493,13.2334829888253],[20.2652289466142,20.5697411418573,20.6936066951466,20.4561789645281,19.6910710469753,18.5918579125541,17.63996677546,16.9177498868822,16.3879197630245,16.0131787815006,15.7562293199246,15.5797737559101,15.4465144670711,15.3202415776683,15.1843376807535,15.0391671731926,14.8856567160502,14.724732970391,14.5573225972795,14.3843522577803,14.2067486129581,14.0254383238775,13.8413480516031,13.6554044571994,13.4685342017312],[20.6245512292189,20.9363521824477,21.0666047763228,20.8337606514907,20.0705537046938,18.9702481118431,18.014580337165,17.286341676655,16.7487127663817,16.364864106288,16.0979661963169,15.9111895364112,15.7677046265138,15.6317544905594,15.4869004311474,15.3334478999586,15.1722567441706,15.0041868109611,14.8300979475078,14.6508500009884,14.4673028185805,14.2803162474619,14.0907501348103,13.8994643278033,13.7073186736186],[20.9852997513945,21.2988414252677,21.4309190835293,21.2000687105673,20.439057677521,19.3398995281061,18.3822084025141,17.6487894420753,17.1034683134858,16.7100606008039,16.4323818880879,16.2342477593962,16.079473798787,15.9329272926385,15.7784187664882,15.6161778288615,15.4469777209062,15.2715916837697,15.0907929585998,14.905354786544,14.7160504087501,14.5236530663656,14.3289360005383,14.1326724524156,13.9356356631453],[21.3397430145538,21.6498686909059,21.7794421504602,21.5479111764188,20.7888452817947,19.6922920567835,18.7338225671777,17.9958943219124,17.4430851117049,17.0399627378313,16.7510950015678,16.5410497041905,16.3743946469753,16.216725176284,16.0521447580649,15.8807988006648,15.7033638580019,15.5205164839942,15.3329332325598,15.1412906576169,14.9462653130835,14.7485337528777,14.5487725309176,14.3476582011213,14.1458673174069],[21.6826812295019,21.9860167252649,22.1100886511499,21.8756334372792,21.1173771672678,20.0231899690207,19.063912308985,18.321486290354,17.7612312659617,17.3484567057193,17.0484720795383,16.82658685733,16.6481105090059,16.4793562582248,16.3047169191756,16.1242558201965,15.9385551372806,15.7481970464209,15.5537637236103,15.3558373448417,15.1550000861083,14.9518341234029,14.7469216327186,14.5408447900483,14.3341857713851],[22.0090178132215,22.3039701343521,22.4208752931294,22.1816861272,21.4222268483555,20.3284799598543,19.3670956202506,18.6195258634451,18.0517042286242,17.6295544656296,17.3190003243029,17.0859655544855,16.896373906019,16.7171331312099,16.5328748132197,16.3435926940905,16.149789153936,15.9519665728703,15.7506273310071,15.5462738084606,15.3394083853444,15.1305334417726,14.9201513578591,14.7087645137177,14.4968752894624],[22.3165676189994,22.6026037495688,22.7114886227233,22.4660709810478,21.7029861605182,20.6068876484835,19.6414406103161,18.8877393309024,18.3121439340305,17.8810048206103,17.5606723915514,17.3174970477637,17.1178291901569,16.9289894038223,16.7357732100889,16.5381225593564,16.3364808973247,16.1312916696938,15.9229983221635,15.7120443004337,15.4988730502044,15.2839280171754,15.0676526470467,14.8504903855181,14.6328846782897],[22.6069746879004,22.8836730369701,22.9838113965231,22.7308297770427,21.9619014813285,20.8608724722545,19.8895530615385,19.1288058143152,18.5452440369028,18.1054713538331,17.7760913896377,17.5237077688483,17.3149241159966,17.1173059047625,16.9157434146269,16.710143228344,16.5009091155284,16.288444845795,16.0731541887585,15.8554409140336,15.635708791235,15.4143615899775,15.1918030798758,14.9684370305447,14.7446672115988],[22.8821437684666,23.1491295885356,23.2398758985062,22.9781431882797,22.2013999209367,21.0931480828183,20.1143477004558,19.3457416452439,18.754042270856,18.3059522677157,17.9681743262465,17.707411136872,17.4903653900157,17.2846981642163,17.0753330037593,16.8621557228618,16.6455475335676,16.4258896479209,16.2035632779658,15.9789496357463,15.7524299333064,15.5243853826903,15.295197195942,15.0652465851055,14.834914762225],[23.1439796092397,23.4009249962447,23.4817144126494,23.2101918878534,22.4239085894931,21.3064281318256,20.3187392536062,19.5415631552491,18.941576369505,18.4854457646755,18.1398382090624,17.8714205709672,17.6468597186917,17.4337817123694,17.217089554412,16.9966610647186,16.7728698764629,16.5460896228184,16.3166939369588,16.0850564520575,15.8515508012883,15.6165506178248,15.3804295348404,15.1435611855089,14.9063192030037],[23.3943869587616,23.6410108520769,23.71135922293,23.4291565488586,22.631854597148,21.5034262709276,20.5056424475278,19.7192866758912,19.1108840664646,18.6469500471302,18.2940000457701,18.0185494902668,17.7871138085023,17.5671720794078,17.3435606435105,17.1161602757232,16.8853498692348,16.6515083172343,16.4150145129109,16.1762473494533,15.9355857200508,15.6934085178922,15.4500946361666,15.206022968063,14.9615724067704],[23.6352705655742,23.8713387480116,23.930842613325,23.6372178443901,22.8276650540516,21.6868561517749,20.6779720087587,19.8819285387308,19.2650030953498,18.7934633174971,18.4335768440544,18.1516113139032,17.913834365925,17.6874847955172,17.4572938479806,17.2231543776842,16.9854612369039,16.7446092779157,16.5009933529956,16.2550083144196,16.0070490144636,15.7575103054037,15.5067870395159,15.255274069076,15.0033662463602],[23.8685351782193,24.0938602760284,24.1421968678115,23.8365564475425,23.0137670703541,21.8594314260187,20.8386426638371,20.0325050753284,19.4069711897754,18.927983778194,18.5614856115999,18.2734194610091,18.0297280974374,17.7973353908834,17.560836744748,17.3201443924104,17.0756777044908,16.8278560516094,16.5770988043864,16.3238253334422,16.0684550093968,15.8114072028705,15.5531012844836,15.2939566248562,15.0343925946086],[24.0960855452388,24.3105270281068,24.3474542703667,24.0293530314107,23.1925877562059,22.0238657453097,20.9905691393012,20.1740326172445,19.5398260833564,19.0535096316382,18.6806433560913,18.3867873507172,18.137501709517,17.8993393956922,17.6567369107383,17.4096313417104,17.1584729970159,16.9037121850623,16.6457992142568,16.385184393007,16.1223180297202,15.8576504328038,15.5916319106652,15.3247127717118,15.057343324351],[24.3198264151746,24.5232905962261,24.5486471049677,24.2177882690894,23.3665542217571,22.1828727612989,21.1366661616889,20.3095274960395,19.6666055097075,19.1730390802474,18.7939670852134,18.49452840216,18.2398619086415,17.9961123401294,17.7475419228772,17.494116247393,17.2363208395,16.9746412250213,16.7095629297803,16.4415714796001,16.1711524003038,15.8987912177147,15.624973457656,15.3501846459509,15.0749103084227],[24.5416625365685,24.734102572366,24.7478076555916,24.4040428336733,23.5380935771582,22.3391661256372,21.2798484575386,20.4420060432741,19.7903472024438,19.289570326439,18.9043738066507,18.5994560344701,18.3395154012884,18.0902697543807,17.8357993580904,17.5761001312669,17.3116949569635,17.0431067182335,16.7708582981303,16.4954725797072,16.2174724460174,15.9373807801145,15.6557204650515,15.3730143838819,15.089785419659]],"type":"surface","x":[52,63.7916666666667,75.5833333333333,87.375,99.1666666666667,110.958333333333,122.75,134.541666666667,146.333333333333,158.125,169.916666666667,181.708333333333,193.5,205.291666666667,217.083333333333,228.875,240.666666666667,252.458333333333,264.25,276.041666666667,287.833333333333,299.625,311.416666666667,323.208333333333,335],"y":[1.513,1.67595833333333,1.83891666666667,2.001875,2.16483333333333,2.32779166666667,2.49075,2.65370833333333,2.81666666666667,2.979625,3.14258333333333,3.30554166666667,3.4685,3.63145833333333,3.79441666666667,3.957375,4.12033333333333,4.28329166666667,4.44625,4.60920833333333,4.77216666666667,4.935125,5.09808333333333,5.26104166666667,5.424],"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># export</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveWidget</span>(fig, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"03-results"</span>, <span class="st">"main_figure"</span>, <span class="st">"fig_key.html"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>